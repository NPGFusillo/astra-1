from peewee import (
    AutoField,
    FloatField,
    TextField,
    ForeignKeyField,
    BitField,
)

from astra import __version__
from astra.models.base import BaseModel
from astra.models.fields import BitField
from astra.models.source import Source
from astra.models.spectrum import Spectrum
from astra.models.pipeline import PipelineOutputMixin


class ThePayne(BaseModel, PipelineOutputMixin):

    """A result from The Payne."""
    
    source_id = ForeignKeyField(Source, index=True)
    spectrum_id = ForeignKeyField(Spectrum, index=True, lazy_load=False)
    
    #> Astra Metadata
    task_id = AutoField()
    v_astra = TextField(default=__version__)
    t_elapsed = FloatField(null=True)
    tag = TextField(default="", index=True)
    
    #> Task Parameters
    model_path = TextField(default="")
    opt_tolerance = FloatField(null=True)
    v_rad_tolerance = FloatField(null=True)
    # TODO: include continuum parameters?
    
    #> Stellar Labels
    v_rel = FloatField(null=True)
    teff = FloatField(null=True)
    e_teff = FloatField(null=True)
    logg = FloatField(null=True)
    e_logg = FloatField(null=True)
    v_turb = FloatField(null=True)
    e_v_turb = FloatField(null=True)
    c_h = FloatField(null=True)
    e_c_h = FloatField(null=True)
    n_h = FloatField(null=True)
    e_n_h = FloatField(null=True)
    o_h = FloatField(null=True)
    e_o_h = FloatField(null=True)
    na_h = FloatField(null=True)
    e_na_h = FloatField(null=True)
    mg_h = FloatField(null=True)
    e_mg_h = FloatField(null=True)
    al_h = FloatField(null=True)
    e_al_h = FloatField(null=True)
    si_h = FloatField(null=True)
    e_si_h = FloatField(null=True)
    p_h = FloatField(null=True)
    e_p_h = FloatField(null=True)
    s_h = FloatField(null=True)
    e_s_h = FloatField(null=True)
    k_h = FloatField(null=True)
    e_k_h = FloatField(null=True)
    ca_h = FloatField(null=True)
    e_ca_h = FloatField(null=True)
    ti_h = FloatField(null=True)
    e_ti_h = FloatField(null=True)
    v_h = FloatField(null=True)
    e_v_h = FloatField(null=True)
    cr_h = FloatField(null=True)
    e_cr_h = FloatField(null=True)
    mn_h = FloatField(null=True)
    e_mn_h = FloatField(null=True)
    fe_h = FloatField(null=True)
    e_fe_h = FloatField(null=True)
    co_h = FloatField(null=True)
    e_co_h = FloatField(null=True)
    ni_h = FloatField(null=True)
    e_ni_h = FloatField(null=True)
    cu_h = FloatField(null=True)
    e_cu_h = FloatField(null=True)
    ge_h = FloatField(null=True)
    e_ge_h = FloatField(null=True)
    c12_c13 = FloatField(null=True)
    e_c12_c13 = FloatField(null=True)
    v_macro = FloatField(null=True)
    e_v_macro = FloatField(null=True)
    

    #> Summary Statistics
    chi_sq = FloatField(null=True)
    reduced_chi_sq = FloatField(null=True)
    result_flags = BitField(default=0)
    

    #> Correlation Coefficients
    rho_teff_logg = FloatField(null=True)
    rho_teff_v_turb = FloatField(null=True)
    rho_teff_c_h = FloatField(null=True)
    rho_teff_n_h = FloatField(null=True)
    rho_teff_o_h = FloatField(null=True)
    rho_teff_na_h = FloatField(null=True)
    rho_teff_mg_h = FloatField(null=True)
    rho_teff_al_h = FloatField(null=True)
    rho_teff_si_h = FloatField(null=True)
    rho_teff_p_h = FloatField(null=True)
    rho_teff_s_h = FloatField(null=True)
    rho_teff_k_h = FloatField(null=True)
    rho_teff_ca_h = FloatField(null=True)
    rho_teff_ti_h = FloatField(null=True)
    rho_teff_v_h = FloatField(null=True)
    rho_teff_cr_h = FloatField(null=True)
    rho_teff_mn_h = FloatField(null=True)
    rho_teff_fe_h = FloatField(null=True)
    rho_teff_co_h = FloatField(null=True)
    rho_teff_ni_h = FloatField(null=True)
    rho_teff_cu_h = FloatField(null=True)
    rho_teff_ge_h = FloatField(null=True)
    rho_teff_c12_c13 = FloatField(null=True)
    rho_teff_v_macro = FloatField(null=True)
    rho_logg_v_turb = FloatField(null=True)
    rho_logg_c_h = FloatField(null=True)
    rho_logg_n_h = FloatField(null=True)
    rho_logg_o_h = FloatField(null=True)
    rho_logg_na_h = FloatField(null=True)
    rho_logg_mg_h = FloatField(null=True)
    rho_logg_al_h = FloatField(null=True)
    rho_logg_si_h = FloatField(null=True)
    rho_logg_p_h = FloatField(null=True)
    rho_logg_s_h = FloatField(null=True)
    rho_logg_k_h = FloatField(null=True)
    rho_logg_ca_h = FloatField(null=True)
    rho_logg_ti_h = FloatField(null=True)
    rho_logg_v_h = FloatField(null=True)
    rho_logg_cr_h = FloatField(null=True)
    rho_logg_mn_h = FloatField(null=True)
    rho_logg_fe_h = FloatField(null=True)
    rho_logg_co_h = FloatField(null=True)
    rho_logg_ni_h = FloatField(null=True)
    rho_logg_cu_h = FloatField(null=True)
    rho_logg_ge_h = FloatField(null=True)
    rho_logg_c12_c13 = FloatField(null=True)
    rho_logg_v_macro = FloatField(null=True)
    rho_v_turb_c_h = FloatField(null=True)
    rho_v_turb_n_h = FloatField(null=True)
    rho_v_turb_o_h = FloatField(null=True)
    rho_v_turb_na_h = FloatField(null=True)
    rho_v_turb_mg_h = FloatField(null=True)
    rho_v_turb_al_h = FloatField(null=True)
    rho_v_turb_si_h = FloatField(null=True)
    rho_v_turb_p_h = FloatField(null=True)
    rho_v_turb_s_h = FloatField(null=True)
    rho_v_turb_k_h = FloatField(null=True)
    rho_v_turb_ca_h = FloatField(null=True)
    rho_v_turb_ti_h = FloatField(null=True)
    rho_v_turb_v_h = FloatField(null=True)
    rho_v_turb_cr_h = FloatField(null=True)
    rho_v_turb_mn_h = FloatField(null=True)
    rho_v_turb_fe_h = FloatField(null=True)
    rho_v_turb_co_h = FloatField(null=True)
    rho_v_turb_ni_h = FloatField(null=True)
    rho_v_turb_cu_h = FloatField(null=True)
    rho_v_turb_ge_h = FloatField(null=True)
    rho_v_turb_c12_c13 = FloatField(null=True)
    rho_v_turb_v_macro = FloatField(null=True)
    rho_c_h_n_h = FloatField(null=True)
    rho_c_h_o_h = FloatField(null=True)
    rho_c_h_na_h = FloatField(null=True)
    rho_c_h_mg_h = FloatField(null=True)
    rho_c_h_al_h = FloatField(null=True)
    rho_c_h_si_h = FloatField(null=True)
    rho_c_h_p_h = FloatField(null=True)
    rho_c_h_s_h = FloatField(null=True)
    rho_c_h_k_h = FloatField(null=True)
    rho_c_h_ca_h = FloatField(null=True)
    rho_c_h_ti_h = FloatField(null=True)
    rho_c_h_v_h = FloatField(null=True)
    rho_c_h_cr_h = FloatField(null=True)
    rho_c_h_mn_h = FloatField(null=True)
    rho_c_h_fe_h = FloatField(null=True)
    rho_c_h_co_h = FloatField(null=True)
    rho_c_h_ni_h = FloatField(null=True)
    rho_c_h_cu_h = FloatField(null=True)
    rho_c_h_ge_h = FloatField(null=True)
    rho_c_h_c12_c13 = FloatField(null=True)
    rho_c_h_v_macro = FloatField(null=True)
    rho_n_h_o_h = FloatField(null=True)
    rho_n_h_na_h = FloatField(null=True)
    rho_n_h_mg_h = FloatField(null=True)
    rho_n_h_al_h = FloatField(null=True)
    rho_n_h_si_h = FloatField(null=True)
    rho_n_h_p_h = FloatField(null=True)
    rho_n_h_s_h = FloatField(null=True)
    rho_n_h_k_h = FloatField(null=True)
    rho_n_h_ca_h = FloatField(null=True)
    rho_n_h_ti_h = FloatField(null=True)
    rho_n_h_v_h = FloatField(null=True)
    rho_n_h_cr_h = FloatField(null=True)
    rho_n_h_mn_h = FloatField(null=True)
    rho_n_h_fe_h = FloatField(null=True)
    rho_n_h_co_h = FloatField(null=True)
    rho_n_h_ni_h = FloatField(null=True)
    rho_n_h_cu_h = FloatField(null=True)
    rho_n_h_ge_h = FloatField(null=True)
    rho_n_h_c12_c13 = FloatField(null=True)
    rho_n_h_v_macro = FloatField(null=True)
    rho_o_h_na_h = FloatField(null=True)
    rho_o_h_mg_h = FloatField(null=True)
    rho_o_h_al_h = FloatField(null=True)
    rho_o_h_si_h = FloatField(null=True)
    rho_o_h_p_h = FloatField(null=True)
    rho_o_h_s_h = FloatField(null=True)
    rho_o_h_k_h = FloatField(null=True)
    rho_o_h_ca_h = FloatField(null=True)
    rho_o_h_ti_h = FloatField(null=True)
    rho_o_h_v_h = FloatField(null=True)
    rho_o_h_cr_h = FloatField(null=True)
    rho_o_h_mn_h = FloatField(null=True)
    rho_o_h_fe_h = FloatField(null=True)
    rho_o_h_co_h = FloatField(null=True)
    rho_o_h_ni_h = FloatField(null=True)
    rho_o_h_cu_h = FloatField(null=True)
    rho_o_h_ge_h = FloatField(null=True)
    rho_o_h_c12_c13 = FloatField(null=True)
    rho_o_h_v_macro = FloatField(null=True)
    rho_na_h_mg_h = FloatField(null=True)
    rho_na_h_al_h = FloatField(null=True)
    rho_na_h_si_h = FloatField(null=True)
    rho_na_h_p_h = FloatField(null=True)
    rho_na_h_s_h = FloatField(null=True)
    rho_na_h_k_h = FloatField(null=True)
    rho_na_h_ca_h = FloatField(null=True)
    rho_na_h_ti_h = FloatField(null=True)
    rho_na_h_v_h = FloatField(null=True)
    rho_na_h_cr_h = FloatField(null=True)
    rho_na_h_mn_h = FloatField(null=True)
    rho_na_h_fe_h = FloatField(null=True)
    rho_na_h_co_h = FloatField(null=True)
    rho_na_h_ni_h = FloatField(null=True)
    rho_na_h_cu_h = FloatField(null=True)
    rho_na_h_ge_h = FloatField(null=True)
    rho_na_h_c12_c13 = FloatField(null=True)
    rho_na_h_v_macro = FloatField(null=True)
    rho_mg_h_al_h = FloatField(null=True)
    rho_mg_h_si_h = FloatField(null=True)
    rho_mg_h_p_h = FloatField(null=True)
    rho_mg_h_s_h = FloatField(null=True)
    rho_mg_h_k_h = FloatField(null=True)
    rho_mg_h_ca_h = FloatField(null=True)
    rho_mg_h_ti_h = FloatField(null=True)
    rho_mg_h_v_h = FloatField(null=True)
    rho_mg_h_cr_h = FloatField(null=True)
    rho_mg_h_mn_h = FloatField(null=True)
    rho_mg_h_fe_h = FloatField(null=True)
    rho_mg_h_co_h = FloatField(null=True)
    rho_mg_h_ni_h = FloatField(null=True)
    rho_mg_h_cu_h = FloatField(null=True)
    rho_mg_h_ge_h = FloatField(null=True)
    rho_mg_h_c12_c13 = FloatField(null=True)
    rho_mg_h_v_macro = FloatField(null=True)
    rho_al_h_si_h = FloatField(null=True)
    rho_al_h_p_h = FloatField(null=True)
    rho_al_h_s_h = FloatField(null=True)
    rho_al_h_k_h = FloatField(null=True)
    rho_al_h_ca_h = FloatField(null=True)
    rho_al_h_ti_h = FloatField(null=True)
    rho_al_h_v_h = FloatField(null=True)
    rho_al_h_cr_h = FloatField(null=True)
    rho_al_h_mn_h = FloatField(null=True)
    rho_al_h_fe_h = FloatField(null=True)
    rho_al_h_co_h = FloatField(null=True)
    rho_al_h_ni_h = FloatField(null=True)
    rho_al_h_cu_h = FloatField(null=True)
    rho_al_h_ge_h = FloatField(null=True)
    rho_al_h_c12_c13 = FloatField(null=True)
    rho_al_h_v_macro = FloatField(null=True)
    rho_si_h_p_h = FloatField(null=True)
    rho_si_h_s_h = FloatField(null=True)
    rho_si_h_k_h = FloatField(null=True)
    rho_si_h_ca_h = FloatField(null=True)
    rho_si_h_ti_h = FloatField(null=True)
    rho_si_h_v_h = FloatField(null=True)
    rho_si_h_cr_h = FloatField(null=True)
    rho_si_h_mn_h = FloatField(null=True)
    rho_si_h_fe_h = FloatField(null=True)
    rho_si_h_co_h = FloatField(null=True)
    rho_si_h_ni_h = FloatField(null=True)
    rho_si_h_cu_h = FloatField(null=True)
    rho_si_h_ge_h = FloatField(null=True)
    rho_si_h_c12_c13 = FloatField(null=True)
    rho_si_h_v_macro = FloatField(null=True)
    rho_p_h_s_h = FloatField(null=True)
    rho_p_h_k_h = FloatField(null=True)
    rho_p_h_ca_h = FloatField(null=True)
    rho_p_h_ti_h = FloatField(null=True)
    rho_p_h_v_h = FloatField(null=True)
    rho_p_h_cr_h = FloatField(null=True)
    rho_p_h_mn_h = FloatField(null=True)
    rho_p_h_fe_h = FloatField(null=True)
    rho_p_h_co_h = FloatField(null=True)
    rho_p_h_ni_h = FloatField(null=True)
    rho_p_h_cu_h = FloatField(null=True)
    rho_p_h_ge_h = FloatField(null=True)
    rho_p_h_c12_c13 = FloatField(null=True)
    rho_p_h_v_macro = FloatField(null=True)
    rho_s_h_k_h = FloatField(null=True)
    rho_s_h_ca_h = FloatField(null=True)
    rho_s_h_ti_h = FloatField(null=True)
    rho_s_h_v_h = FloatField(null=True)
    rho_s_h_cr_h = FloatField(null=True)
    rho_s_h_mn_h = FloatField(null=True)
    rho_s_h_fe_h = FloatField(null=True)
    rho_s_h_co_h = FloatField(null=True)
    rho_s_h_ni_h = FloatField(null=True)
    rho_s_h_cu_h = FloatField(null=True)
    rho_s_h_ge_h = FloatField(null=True)
    rho_s_h_c12_c13 = FloatField(null=True)
    rho_s_h_v_macro = FloatField(null=True)
    rho_k_h_ca_h = FloatField(null=True)
    rho_k_h_ti_h = FloatField(null=True)
    rho_k_h_v_h = FloatField(null=True)
    rho_k_h_cr_h = FloatField(null=True)
    rho_k_h_mn_h = FloatField(null=True)
    rho_k_h_fe_h = FloatField(null=True)
    rho_k_h_co_h = FloatField(null=True)
    rho_k_h_ni_h = FloatField(null=True)
    rho_k_h_cu_h = FloatField(null=True)
    rho_k_h_ge_h = FloatField(null=True)
    rho_k_h_c12_c13 = FloatField(null=True)
    rho_k_h_v_macro = FloatField(null=True)
    rho_ca_h_ti_h = FloatField(null=True)
    rho_ca_h_v_h = FloatField(null=True)
    rho_ca_h_cr_h = FloatField(null=True)
    rho_ca_h_mn_h = FloatField(null=True)
    rho_ca_h_fe_h = FloatField(null=True)
    rho_ca_h_co_h = FloatField(null=True)
    rho_ca_h_ni_h = FloatField(null=True)
    rho_ca_h_cu_h = FloatField(null=True)
    rho_ca_h_ge_h = FloatField(null=True)
    rho_ca_h_c12_c13 = FloatField(null=True)
    rho_ca_h_v_macro = FloatField(null=True)
    rho_ti_h_v_h = FloatField(null=True)
    rho_ti_h_cr_h = FloatField(null=True)
    rho_ti_h_mn_h = FloatField(null=True)
    rho_ti_h_fe_h = FloatField(null=True)
    rho_ti_h_co_h = FloatField(null=True)
    rho_ti_h_ni_h = FloatField(null=True)
    rho_ti_h_cu_h = FloatField(null=True)
    rho_ti_h_ge_h = FloatField(null=True)
    rho_ti_h_c12_c13 = FloatField(null=True)
    rho_ti_h_v_macro = FloatField(null=True)
    rho_v_h_cr_h = FloatField(null=True)
    rho_v_h_mn_h = FloatField(null=True)
    rho_v_h_fe_h = FloatField(null=True)
    rho_v_h_co_h = FloatField(null=True)
    rho_v_h_ni_h = FloatField(null=True)
    rho_v_h_cu_h = FloatField(null=True)
    rho_v_h_ge_h = FloatField(null=True)
    rho_v_h_c12_c13 = FloatField(null=True)
    rho_v_h_v_macro = FloatField(null=True)
    rho_cr_h_mn_h = FloatField(null=True)
    rho_cr_h_fe_h = FloatField(null=True)
    rho_cr_h_co_h = FloatField(null=True)
    rho_cr_h_ni_h = FloatField(null=True)
    rho_cr_h_cu_h = FloatField(null=True)
    rho_cr_h_ge_h = FloatField(null=True)
    rho_cr_h_c12_c13 = FloatField(null=True)
    rho_cr_h_v_macro = FloatField(null=True)
    rho_mn_h_fe_h = FloatField(null=True)
    rho_mn_h_co_h = FloatField(null=True)
    rho_mn_h_ni_h = FloatField(null=True)
    rho_mn_h_cu_h = FloatField(null=True)
    rho_mn_h_ge_h = FloatField(null=True)
    rho_mn_h_c12_c13 = FloatField(null=True)
    rho_mn_h_v_macro = FloatField(null=True)
    rho_fe_h_co_h = FloatField(null=True)
    rho_fe_h_ni_h = FloatField(null=True)
    rho_fe_h_cu_h = FloatField(null=True)
    rho_fe_h_ge_h = FloatField(null=True)
    rho_fe_h_c12_c13 = FloatField(null=True)
    rho_fe_h_v_macro = FloatField(null=True)
    rho_co_h_ni_h = FloatField(null=True)
    rho_co_h_cu_h = FloatField(null=True)
    rho_co_h_ge_h = FloatField(null=True)
    rho_co_h_c12_c13 = FloatField(null=True)
    rho_co_h_v_macro = FloatField(null=True)
    rho_ni_h_cu_h = FloatField(null=True)
    rho_ni_h_ge_h = FloatField(null=True)
    rho_ni_h_c12_c13 = FloatField(null=True)
    rho_ni_h_v_macro = FloatField(null=True)
    rho_cu_h_ge_h = FloatField(null=True)
    rho_cu_h_c12_c13 = FloatField(null=True)
    rho_cu_h_v_macro = FloatField(null=True)
    rho_ge_h_c12_c13 = FloatField(null=True)
    rho_ge_h_v_macro = FloatField(null=True)
    rho_c12_c13_v_macro = FloatField(null=True)